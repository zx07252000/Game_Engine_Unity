# Game_Engine_Unity

[게임 씬들의 위치]
Assets/Scenes 폴더
-TitleScene: 게임 시작점
-MountainTale: 스테이지 1
-Stage2: 스테이지 2
-Stage3: 스테이지 3
-BattleScene: 전투 화면
-EndScene: 게임 클리어 or 패배 화면

[스크립트 위치]
-스테이지 및 아이템, 인벤토리 스크립트: Assets/Scenes/Script
-전투화면 관련 스크립트: Assets/BattleSceneScripts
-타이틀/클리어 씬 관련 스크립트: Assets/Title&EndScripts

[개발 사항]

-TitleScene
*시작 버튼 클릭시 MountainTale 씬으로 전환
*하단 X 버튼 클릭시 게임 종료

-MountainTale/Stage2/Stage3
이동: 좌우상하 키
인벤토리 활성/비활성화: i 키
아이템 사용: 상단 숫자키 1~5번
*플레이어 이동 및 애니메이션 구현
*플레이어가 이동하거나 대기중일때 조금씩 캐릭터 위의 게이지가 채워짐, 100이 되면 몬스터가 출현해 BattleScene으로 전환
*맵에 생성된 보물상자와 충돌시 상자가 사라지고 무작위 포션이 드롭됨
*포션은 체력회복, 공격력 스탯 증가, 몬슽터 출현 게이지 감소 등이 존재

-BattleScene
하단의 버튼을 마우스로 클릭해 적 몬스터와 전투
기본공격: 자신의 공격력-상대 방어력 만큼 피해를 줌
이단공격: 자신의 공격력*0.8-상대 방어력 만큼 2회 피해를 줌
슬래시: 자신의 공격력*1.8-상대 방어력 만큼 피해를 줌
*전투는 실시간이 아닌 턴방식으로 진행, Update()를 사용하지 않고 플레이어와 몬스터의 각 턴 함수가 서로를 호출하며 진행됨
*코루틴을 사용해 텍스트 출력과 플레이어/몬스터의 공격 애니메이션이 시간차를 두고 자동으로 자연스럽게 진행되도록 구현
*몬스터는 전투씬 진입시 각 스테이지마다 2종중 하나가 랜덤으로 생성되며 몬스터의 행동 역시 기본공격 70%, 스킬 30% 비율로 난수를 생성해 이루어짐(보스의 경우 스킬 세가지)
*각 몬스터는 강화공격/방어무시 공격/체력비례 고정피해 공격 등 다양한 스킬들 보유

-BattleScene -> EndScene 전환
*플레이어가 처치한 몬스터가 보스였을 경우 int result 값에 1을 넣어, 반대로 플레이어가 죽었을 경우 0을 넣어 EndScene으로 전송
-BattleScene -> 스테이지 Scene 전환
*플레이어가 처치한 몬스터가 보스가 아닌 일반 몬스터들인 경우 전투 종료시 얻은 경험치를 계산해 레벨업 및 스탯 증가를 적용한 후 플레이어 스탯들을 스테이지에 전송
****현재 이 기능에 문제가 있음******
-PlayerPrefs.Get~, PlayerPrefs.Set~ 을 사용해 두 씬 간의 플레이어 정보를 전달하면 값은 넘어가나 씬 전환이 되지 않음, 하지만 정보를 전달하지 않으면 씬 전환이 정상적으로 작동함. 현재는 임시로 후자를 채택해 전투가 끝나면 스테이지 씬에서 플레이어의 스탯이나 위치가 초기화되는 문제가 발생함
-다음 사항들을 수정해 BattleScene만 실행해 전투시스템 및 다양한 몬스터들의 테스트 가능
1)BattleSceneScript 폴더의 BattleManager 스크립트, start() 함수 내의 //probability = 4; 의 주석을 해제하고 숫자를 대입하면 해당 번호의 몬스터가 전투씬 시작 시 생성됨
2) BattleSceneScript 폴더의 Player 스크립트, test 값을 true로 주고 if(test == true) 내의 플레이어 스탯 정보들을 수정해 플레이어 능력치 임의 설정 가능

-EndScene
*BattleScene에서 받은 result 값을 int win 값에 저장.
*win 값이 1일경우 게임 클리어 출력, 0일 경우 게임 패배 출력
*아무 키나 누르면 TitleScene으로 돌아감

StageScene <-> BattleScene 간의 데이터 전달이 안되는 문제를 제외하면 나머지 기능들은 예정대로 모두 구현 완료
서로 플레이어 스탯 정보같은 기본 클래스들의 구조나 씬 전환 함수 등의 기능들을 동일하게 만들도록 규칙을 정했어야 했는데 그런 것들이 부족해 마지막에 서로의 작업내용을 합치는 과정에서 문제들이 발생한 것 같다... 